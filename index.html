<!DOCTYPE html>
<html lang="nl" data-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Een kleine site over een leuke film; Super Mario Bros. The Movie">
  <meta name="keywords" content="film, review, recensies, mario, super mario, nintendo">
  <meta name="author" content="Kelly">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>The Super Mario Bros. Movie</title>
  <link rel="stylesheet" href="./assets/styles.css">
  {{/*  <script src="./assets/theme-switch.js" defer></script>  */}}
</head>

<body>
  <style>

  </style>
  </head>

  <body>
    <button 
      type="button" 
      data-theme-toggle 
      aria-label="Toggle theme"
      aria-live="polite"
    >
      *star*
    </button>
    <p>
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquam pariatur doloribus mollitia eum similique accusantium provident enim culpa exercitationem, corporis deleniti ipsam quo adipisci, eaque explicabo doloremque odit deserunt. Numquam.
    </p>

    <script>
      function updateButton({ buttonEl, isDark }) {
          const newCta = isDark ? "Change to light theme" : "Change to dark theme";
          // use an aria-label if you are omitting text on the button
          // and using a sun/moon icon, for example
          buttonEl.setAttribute("aria-label", newCta);
          buttonEl.innerText = newCta;
        }

      function calculateSettingAsThemeString({ localStorageTheme, systemSettingDark }) {
        if (localStorageTheme !== null) {
          return localStorageTheme;
        }

        if (systemSettingDark.matches) {
          return "dark";
        }

        return "light";
      }

      function updateThemeOnHtmlEl({ theme }) {
        document.querySelector("html").setAttribute("data-theme", theme);
      }

      const button = document.querySelector("[data-theme-toggle]");
      const localStorageTheme = localStorage.getItem("theme");
      const systemSettingDark = window.matchMedia("(prefers-color-scheme: dark)");

      let currentThemeSetting = calculateSettingAsThemeString({ localStorageTheme, systemSettingDark });

      // update on page load
      updateButton({ buttonEl: button, isDark: currentThemeSetting === "dark" });
      updateThemeOnHtmlEl({ theme: currentThemeSetting });

      // update on theme button click
      button.addEventListener("click", () => {
        const newTheme = currentThemeSetting === "dark" ? "light" : "dark";

        localStorage.setItem("theme", newTheme);
        updateButton({ buttonEl: button, isDark: newTheme === "dark" });
        updateThemeOnHtmlEl({ theme: newTheme });

        currentThemeSetting = newTheme;
      });
    </script>


  </body>

</html>